---
title:  Bue源码阅读笔记（6）
tags: Bue笔记
date: 2017-5-25 09：50
---

[当前版本](https://github.com/youngwind/bue/tree/9e9804c2ee802c2658199236b10da42d6ea16136)

### 进展

- v-on实现
- 完成动态v-if指令

### 代码执行补充

v-on: 和v-if类似, _init()中把on指令相关函数放在了directives里面 --> 使用on相关指令绑定事件

v-repeat: 和v-if类似, _init()中把on指令相关函数放在了directives里面 --> 使用repeat相关指令绑定事件

5.30补充
这里需要详细的了解一下repeat指令里面的流程

- 1. 首先执行bind(), 给repeat指定了唯一的uid, 并创建repeat注释
- 2. upadate 
    a.首次执行：进入diff, 调用build(), 给v-repeat内部变量item赋值，为item创建了Bue实例和数据缓存(循环的子数据(最终来看就是item)[this.id] = vm(即新创建的Bue实例)), 渲染dom
    b.再次执行: 数据变化之后, 进入diff, 判断是否有旧数据并打上记号, 删除不存在的实例, 把新实例插入到正确的位置(感觉这里的第三步代码有问题。。。)
